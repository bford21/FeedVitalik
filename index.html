 <html>
 	<head>
 		<title>Feed Vitalik</title>
 		<style type="text/css">
 			html, body {
			  width:  100%;
			  height: 100%;
			  margin: 0px;
			}
			#menu{
				position: absolute;
				bottom: 80%;
  				left: 50;
			}
 		</style>

 		<!--<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>-->

 		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

		<!-- jQuery library -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

		<!-- Latest compiled JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

		<!-- 8-bit font -->
 		<link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
 	</head>

	<body>
		<div id="myModal" class="modal fade" role="dialog">
		  <div class="modal-dialog">

		    <!-- Modal content-->
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal">&times;</button>
		        <h4 class="modal-title">Vitalik Hunger Board</h4>
		      </div>
		      <div class="modal-body">
		        <h2>Your top scores</h2>
		        <
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>

		  </div>
		</div>

		<button type="button" class="btn btn-primary btn-lg" id="menu" data-toggle="modal" data-target="#myModal">Menu</button>
		<canvas id="canvas"></canvas>
		<script>

			$("#canvas").prop("width", window.innerWidth).prop("height", window.innerHeight); 
    		window.addEventListener("keydown", move, false);

			var context = document.getElementById('canvas').getContext("2d");
			var charX = 500;
			// charY should be dynamic based on size of canvas
			var charY = canvas.height-300;

			var ethPos = window.innerHeight;
			var noOfEth = 40;
			var fallingEth = [];
			var fallingEthY = -100; // Account for image size and start from the top

			var score = 0;
			var lastAte = 0;
			var largestAte = 0;
			var numEthAte = 0;

			var bg = new Image();
			var vitalikOpenMouth = new Image();
			var vitalikSmile = new Image();
			var eth = new Image();

			bg.src= "Images/bg.png";
			vitalikOpenMouth.src = "Images/vitalikOpenMouth_Transparent.png";
			vitalikSmile.src = "Images/vitalikSmile_Transparent.png";
			
			vitalikSmile.onload = function() { 
				context.drawImage(bg, 0, 0, bg.width, bg.height, 0, 0, canvas.width, canvas.height);
				context.drawImage(vitalikSmile, charX, charY, 120, 262);
			}

			function move(e) {
			    switch(e.keyCode) {   	
			        case 37: // left key pressed
			            if(charX > 0)
			            	charX -= 30;
			            break;
			        case 39: // right key pressed
			            if(charX < (canvas.width-110))
			            	charX += 30;
			            break;
			        case 65: // a
			        	if(charX > 0)
			            	charX -= 30;
			            break;
			        case 68: // d
			            if(charX < (canvas.width-110))
			            	charX += 30;
			            break;
			    }   
			} 

			function drawBg(){
				context.drawImage(bg, 0, 0, bg.width, bg.height, 0, 0, canvas.width, canvas.height);
			}

			function drawScoreboard(){
				context.font = "25px 'Press Start 2P'";
				context.fillStyle = "red";
				context.fillText("Score: " + score, 10, 40);

				context.font = "15px 'Press Start 2P'";
				context.fillStyle = "blue";
				context.fillText("Last: " + lastAte, 10, 80);
				context.fillText("Total: " + numEthAte, 10, 100);
				context.fillText("Largest: " + largestAte, 10, 120);
			}

			function recycleEth(i){
				fallingEth[i].x = randomX();
				fallingEth[i].y = fallingEthY;
				fallingEth[i].size = randomSize();
				fallingEth[i].speed = randomSpeed();
			}

			function randomX(){
				return Math.random() * (canvas.width-100);
			}

			function randomSize(){
				return Math.floor(Math.random() * 100) + 1;
			}

			function randomSpeed(){
				return 3 + Math.random() * 5;
			}

			function drawVitalik(){
				for (var i=0; i < noOfEth; i++){
					if (charX+100  > fallingEth[i].x && charX-100 < fallingEth[i].x && charY+100 > fallingEth[i].y && charY-100 < fallingEth[i].y){
						context.drawImage(vitalikOpenMouth, charX, charY, 120, 262);
						break;
					}
					else{
						context.drawImage(vitalikSmile, charX, charY, 120, 262);
					}
				}
			}

			function checkIfAte(i){
				if (charX+70  > fallingEth[i].x && charX-80 < fallingEth[i].x && charY+70 > fallingEth[i].y && charY-40 < fallingEth[i].y){
						recycleEth(i);
						lastAte = fallingEth[i].size;

						if(fallingEth[i].size > largestAte){
							largestAte = fallingEth[i].size;
						}

						numEthAte++;
						score += fallingEth[i].size;
					}
			}

			function draw(){
				drawBg();
				drawVitalik();

				// Loop through all eth 
				for (var i=0; i < noOfEth; i++){

					checkIfAte(i);

					// Draw eth based on size
					if(fallingEth[i].size < 50){
			        	context.drawImage(fallingEth[i].image, fallingEth[i].x, fallingEth[i].y, 62, 62);
			        }
			        else if(fallingEth[i].size > 50 && fallingEth[i].size < 92){
			        	context.drawImage(fallingEth[i].image, fallingEth[i].x, fallingEth[i].y, 125, 125);
			        }
			        else{
			        	context.drawImage(fallingEth[i].image, fallingEth[i].x, fallingEth[i].y, 250, 250);
			        }

			        //Set the falling speed
			        fallingEth[i].y += fallingEth[i].speed; 

			        //Recycle eth after falling off screen		        
			        if (fallingEth[i].y > canvas.height) 
				        recycleEth(i);	

				    // Drawn last so eth go behind
				    drawScoreboard();		                
			    }
			}

			setInterval(draw, 36);

			for (var i = 0; i < noOfEth; i++) {
		        var fallingDr = new Object();
		        fallingDr["image"] =  new Image();
		        fallingDr.image.src = "Images/eth.png";
		        console.log("loaded eth");

		        fallingDr["x"] = randomX();
		        fallingDr["y"] = fallingEthY;
		        fallingDr["size"] = randomSize();
		        fallingDr["speed"] = randomSpeed();
		           
		        fallingEth.push(fallingDr);
	        }
		</script>

	</body>
</html>